var CIVI_STRIPE=CIVI_STRIPE||{};(function(r){"use strict";CIVI_STRIPE={init:function(){this.setupForm()},setupForm:function(){var i=this,n=r(".civi-service-stripe-form");if(n.length===0)return;var e=n.attr("id");var a=civi_stripe_vars[e];var t=null;var c=n.find(".civi-stripe-button");if(c.length){t=StripeCheckout.configure({key:a.key,locale:"auto",token:function(i,e){r("<input>").attr({type:"hidden",name:"stripeToken",value:i.id}).appendTo(n);r("<input>").attr({type:"hidden",name:"stripeTokenType",value:i.type}).appendTo(n);if(i.email){r("<input>").attr({type:"hidden",name:"stripeEmail",value:i.email}).appendTo(n)}n.submit()}});c.on("click",function(i){i.preventDefault();t.open(a.params)})}window.addEventListener("popstate",function(){if(t!=null){t.close()}})}};r(document).ready(function(){CIVI_STRIPE.init();var i=function(i){if(i=="undefined"||i==""||i==null){i=loading_text}var e=wp.template("civi-processing-template");r("body").append(e({ico:"fa fa-spinner fa-spin",text:i}))};if(typeof civi_payment_vars!=="undefined"){var e=civi_template_vars.ajax_url;r("#civi_payment_service").on("click",function(i){var e=r("input[name='civi_payment_method']:checked").val();var n=r(".payment-wrap").find("input[name='service_id']").val();if(e=="paypal"){a(n)}else if(e=="stripe"){r("#civi_stripe_service_addons button").trigger("click")}else if(e=="wire_transfer"){t(n)}else if(e=="woocheckout"){c(n)}});var a=function(i){r.ajax({type:"POST",url:e,data:{action:"civi_paypal_payment_service_addons",service_id:i,civi_service_security_payment:r("#civi_service_security_payment").val()},beforeSend:function(){r("#civi_payment_service").append('<div class="civi-loading-effect"><span class="civi-dual-ring"></span></div>')},success:function(i){window.location.href=i}})};var t=function(i){r.ajax({type:"POST",url:e,data:{action:"civi_wire_transfer_service_addons",service_id:i,civi_service_security_payment:r("#civi_service_security_payment").val()},beforeSend:function(){r("#civi_payment_service").append('<div class="civi-loading-effect"><span class="civi-dual-ring"></span></div>')},success:function(i){window.location.href=i}})};var c=function(i){r.ajax({type:"POST",url:e,data:{action:"civi_woocommerce_payment_service_addons",service_id:i,civi_service_security_payment:r("#civi_service_security_payment").val()},beforeSend:function(){r("#civi_payment_service").append('<div class="civi-loading-effect"><span class="civi-dual-ring"></span></div>')},success:function(i){window.location.href=i}})}}})})(jQuery);