(function(C){"use strict";var D=C("#submit_company_form"),a=D.data("titleerror"),i=D.data("deserror"),e=D.data("caterror"),t=D.data("sizeerror"),o=D.data("emailerror");var I=civi_submit_vars.ajax_url,O=civi_submit_vars.company_dashboard,P=civi_submit_vars.custom_field_company;C(document).ready(function(){C.validator.setDefaults({ignore:":hidden:not(select)"});D.validate({ignore:[],rules:{company_title:{required:true},company_categories:{required:true},company_size:{required:true},company_email:{required:true},company_des:{required:true}},messages:{company_title:a,company_des:i,company_categories:e,company_size:t,company_email:o},submitHandler:function(a){n()},errorPlacement:function(a,n){a.insertAfter(n)},invalidHandler:function(){if(C(".error:visible").length>0){C("html, body").animate({scrollTop:C(".error:visible").offset().top-100},500)}}});function n(){var a=D.find('input[name="company_form"]').val(),n=D.find('input[name="company_action"]').val(),i=D.find('input[name="company_id"]').val(),e=D.find('input[name="company_title"]').val(),t=D.find('select[name="company_categories"]').val(),o=D.find('input[name="company_url"]').val(),m=tinymce.get("company_des").getContent(),c=D.find('input[name="company_website"]').val(),p=D.find('input[name="company_phone"]').val(),_=D.find('input[name="company_email"]').val(),r=D.find('select[name="company_founded"]').val(),l=D.find('select[name="company_size"]').val(),d=D.find('input[name="company_twitter"]').val(),u=D.find('input[name="company_linkedin"]').val(),y=D.find('input[name="company_facebook"]').val(),s=D.find('input[name="company_instagram"]').val(),f=D.find('input[name="company_social_name[]"]').map(function(){return C(this).val()}).get(),v=D.find('input[name="company_social_url[]"]').map(function(){return C(this).val()}).get(),b=D.find('select[name="company_location"]').val(),g=D.find('input[name="civi_map_address"]').val(),h=D.find('input[name="civi_map_location"]').val(),k=D.find('input[name="civi_latitude"]').val(),w=D.find('input[name="civi_longtitude"]').val(),j=D.find('input[name="company_avatar_url"]').val(),q=D.find('input[name="company_avatar_id"]').val(),z=D.find('input[name="company_thumbnail_url"]').val(),x=D.find('input[name="company_thumbnail_id"]').val(),H=D.find('input[name="civi_gallery_ids[]"]').map(function(){return C(this).val()}).get(),T=D.find('input[name="company_video_url"]').val();var A={};C("#company-submit-additional").each(function(){C.each(P,function(a,n){var i=C(".form-control[name="+n.id+"]").val();if(n.type=="radio"){i=C("input[name="+n.id+"]:checked").val()}if(n.type=="checkbox_list"){var e=[];C('input[name="'+n.id+'[]"]:checked').each(function(){e.push(C(this).val())});i=e}if(n.type=="image"){i=C("input#custom_image_id_"+n.id).val()}A[n.id]=i})});C.ajax({dataType:"json",url:I,data:{action:"company_submit_ajax",company_form:a,company_action:n,company_id:i,company_title:e,company_categories:t,company_url:o,company_des:m,company_website:c,company_founded:r,company_phone:p,company_email:_,company_size:l,company_twitter:d,company_linkedin:u,company_facebook:y,company_instagram:s,company_social_name:f,company_social_url:v,company_location:b,company_map_address:g,company_map_location:h,company_latitude:k,company_longtitude:w,company_avatar_url:j,company_avatar_id:q,company_thumbnail_url:z,company_thumbnail_id:x,civi_gallery_ids:H,company_video_url:T,custom_field_company:A},beforeSend:function(){C(".btn-submit-company .btn-loading").fadeIn()},success:function(a){C(".btn-submit-company .btn-loading").fadeOut();if(a.success===true){window.location.href=O}}})}})})(jQuery);