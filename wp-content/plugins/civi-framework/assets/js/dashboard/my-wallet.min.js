var MESSAGES=MESSAGES||{};(function(o){"use strict";var l=civi_my_wallet_vars.ajax_url,d=civi_my_wallet_vars.not_wallet,c=o(".civi-service-withdraw"),e=o("#form-service-withdraw");MESSAGES={init:function(){this.submit_withdraw();this.my_wallet()},submit_withdraw:function(){o("body").on("click","#btn-submit-withdraw",function(i){i.preventDefault();var a=o(this),t=e.find('select[name="withdraw_payment"]').val(),n=e.find('input[name="withdraw_price"]').val();o.ajax({type:"POST",url:l,dataType:"json",data:{action:"civi_submit_withdraw",withdraw_payment:t,withdraw_price:n},beforeSend:function(){a.find(".btn-loader").html('<i class="fal fa-spinner fa-spin"></i>')},success:function(i){if(i.success==true){location.reload();e.find(".civi-message-error").addClass("true")}e.find(".civi-message-error").text(i.message);a.find(".btn-loader").html('<i class="fas fa-arrow-to-bottom"></i>')}})})},my_wallet:function(){c.find(".select-pagination").change(function(){var i="";o(".select-pagination option:selected").each(function(){i+=o(this).val()+" "});o(this).attr("value")}).trigger("change");c.find("select.search-control").on("change",function(){o(".civi-pagination").find('input[name="paged"]').val(1);n()});c.find("input.search-control").on("input",function(){o(".civi-pagination").find('input[name="paged"]').val(1);n()});function i(t,n){var e=0;return function(){var i=this,a=arguments;clearTimeout(e);e=setTimeout(function(){t.apply(i,a)},n||0)}}c.find("input.service-search-control").keyup(i(function(){o(".civi-pagination").find('input[name="paged"]').val(1);n()},1e3));o("body").on("click",".civi-pagination a.page-numbers",function(i){i.preventDefault();o(".civi-pagination li .page-numbers").removeClass("current");o(this).addClass("current");var a=o(this).text();var t=1;if(c.find(".civi-pagination").find('input[name="paged"]').val()){t=o(".civi-pagination").find('input[name="paged"]').val()}if(o(this).hasClass("next")){a=parseInt(t)+1}if(o(this).hasClass("prev")){a=parseInt(t)-1}c.find(".civi-pagination").find('input[name="paged"]').val(a);n()});var a=1;c.find(".select-pagination").attr("data-value",a);function n(){var s=1;var i=c.find("#my-wallet").height();var a=c.find('select[name="wallet_status"]').val(),t=c.find('select[name="wallet_method"]').val(),n=c.find('select[name="item_amount"]').val(),e=c.find('select[name="wallet_sort_by"]').val();s=o(".civi-pagination").find('input[name="paged"]').val();o.ajax({dataType:"json",url:l,data:{action:"civi_candidate_wallet_service",item_amount:n,paged:s,wallet_status:a,wallet_method:t,wallet_sort_by:e},beforeSend:function(){c.find(".civi-loading-effect").addClass("loading").fadeIn();c.find("#my-wallet").height(i)},success:function(i){if(i.success===true){var a=c.find(".items-pagination"),t=a.find('select[name="item_amount"] option:selected').val(),n=i.total_post,e=t*s+1-t,l=t*s;if(n<e){e=t*(s-1)+1}if(n<l){l=n}o(".num-first").text(e);o(".num-last").text(l);if(n>t){a.closest(".pagination-dashboard").show();a.find(".num-total").html(i.total_post)}else{a.closest(".pagination-dashboard").hide()}c.find(".pagination").html(i.pagination);c.find("#my-wallet tbody").fadeOut("fast",function(){c.find("#my-wallet tbody").html(i.wallet_html);c.find("#my-wallet tbody").fadeIn(300)});c.find("#my-wallet").css("height","auto")}else{c.find("#my-wallet tbody").html('<span class="not-service">'+d+"</span>")}c.find(".civi-loading-effect").removeClass("loading").fadeOut()}})}}};o(document).ready(function(){MESSAGES.init()})})(jQuery);