var CIVI_SERVICE_STRIPE=CIVI_SERVICE_STRIPE||{};(function(d){"use strict";CIVI_SERVICE_STRIPE={init:function(){this.setupForm()},setupForm:function(){var a=this,e=d(".civi-candidate-stripe-form");if(e.length===0)return;var i=e.attr("id");var n=civi_stripe_vars[i];var c=null;var t=e.find(".civi-stripe-button");if(t.length){c=StripeCheckout.configure({key:n.key,locale:"auto",token:function(a,i){d("<input>").attr({type:"hidden",name:"stripeToken",value:a.id}).appendTo(e);d("<input>").attr({type:"hidden",name:"stripeTokenType",value:a.type}).appendTo(e);if(a.email){d("<input>").attr({type:"hidden",name:"stripeEmail",value:a.email}).appendTo(e)}e.submit()}});t.on("click",function(a){a.preventDefault();c.open(n.params)})}window.addEventListener("popstate",function(){if(c!=null){c.close()}})}};d(document).ready(function(){CIVI_SERVICE_STRIPE.init();if(typeof civi_payment_vars!=="undefined"){var i=civi_payment_vars.ajax_url;var a=civi_payment_vars.processing_text;d("#civi_payment_candidate_package").on("click",function(a){var i=d("input[name='civi_candidate_payment_method']:checked").val();var e=d("input[name='civi_candidate_package_id']").val();if(i=="paypal"){n(e)}else if(i=="stripe"){d("#civi_stripe_candidate_per_package button").trigger("click")}else if(i=="wire_transfer"){c(e)}else if(i=="woocheckout"){t(e)}});var n=function(a){d.ajax({type:"POST",url:i,data:{action:"civi_candidate_paypal_payment_per_package_ajax",candidate_package_id:a,civi_candidate_security_payment:d("#civi_candidate_security_payment").val()},beforeSend:function(){d("#civi_payment_candidate_package").append('<div class="civi-loading-effect"><span class="civi-dual-ring"></span></div>')},success:function(a){window.location.href=a}})};var e=function(a){d.ajax({type:"POST",url:i,data:{action:"civi_candidate_paypal_payment_per_package_ajax",candidate_package_id:a,civi_candidate_security_payment:d("#civi_candidate_security_payment").val()},beforeSend:function(){d("#civi_payment_candidate_package").append('<div class="civi-loading-effect"><span class="civi-dual-ring"></span></div>')},success:function(a){window.location.href=a}})};var c=function(a){d.ajax({type:"POST",url:i,data:{action:"civi_candidate_wire_transfer_per_package_ajax",candidate_package_id:a,civi_candidate_security_payment:d("#civi_candidate_security_payment").val()},beforeSend:function(){d("#civi_payment_candidate_package").append('<div class="civi-loading-effect"><span class="civi-dual-ring"></span></div>')},success:function(a){window.location.href=a}})};d("#civi_free_candidate_package").on("click",function(){var a=d("input[name='civi_candidate_package_id']").val();d.ajax({type:"POST",url:i,data:{action:"civi_candidate_free_package_ajax",candidate_package_id:a,civi_candidate_security_payment:d("#civi_candidate_security_payment").val()},beforeSend:function(){d("#civi_payment_candidate_package").append('<div class="civi-loading-effect"><span class="civi-dual-ring"></span></div>')},success:function(a){window.location.href=a}})});var t=function(a){d.ajax({type:"POST",url:i,data:{action:"civi_candidate_woocommerce_payment_per_package_ajax",candidate_package_id:a,civi_candidate_security_payment:d("#civi_candidate_security_payment").val()},beforeSend:function(){d("#civi_payment_candidate_package").append('<div class="civi-loading-effect"><span class="civi-dual-ring"></span></div>')},success:function(a){window.location.href=a}})}}})})(jQuery);